
# DOCS https://zsh.sourceforge.io/Doc/Release/Options.html
# DOCS https://zsh.sourceforge.io/Doc/Release/Parameters.html#Parameters-Used-By-The-Shell
#───────────────────────────────────────────────────────────────────────────────


# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
# If you come from bash you might have to change your $PATH.
# export PATH=$HOME/bin:/usr/local/bin:$PATH
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

eval "$(sheldon source)"

# array of files to source
ZSH_CONFIG_FILES=(
	"$ZDOTDIR/config/zsh_options.zsh"
	"$ZDOTDIR/config/.bash_aliases"
	"$ZDOTDIR/completions/git-extras-completion.zsh"
	"$ZDOTDIR/config/insulter.zsh"
)

for filename in "${ZSH_CONFIG_FILES[@]}"; do
  if [ -f "$filename" ]; then
        # shellcheck disable=1090
        source "$filename"
    fi
done


zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=* l:|=*'
zstyle ':completion:*' menu no

zstyle ':completion:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,%cpu,tty,cputime,cmd'


# initialise completions with ZSH's compinit
autoload -Uz compinit
if [[ -n ${ZDOTDIR}/.zcompdump(#qN.mh+24) ]]; then
	compinit;
else
	compinit -C;
fi;

_comp_options+=(globdots) # tab complete hidden files

# vi mode
export KEYTIMEOUT=1
export VI_MODE_SET_CURSOR=true
bindkey -v


# keybinds
bindkey -s '^O' 'sesh_sessions\n'


# User configuration

# export MANPATH="/usr/local/man:$MANPATH"

# You may need to manually set your language environment
# export LANG=en_US.UTF-8

# Preferred editor for local and remote sessions
# if [[ -n $SSH_CONNECTION ]]; then
#   export EDITOR='vim'
# else
# fi

# Compilation flags
# export ARCHFLAGS="-arch x86_64"

#export QT_AUTO_SCREEN_SCALE_FACTOR=0

# Set personal aliases, overriding those provided by oh-my-zsh libs,
# plugins, and themes. Aliases can be placed here, though oh-my-zsh
# users are encouraged to define aliases within the ZSH_CUSTOM folder.
# For a full list of active aliases, run `alias`.
#
_evalcache thefuck --alias
_evalcache zoxide init zsh --hook pwd
# Set up fzf key bindings and fuzzy completion
_evalcache fzf --zsh
_evalcache mise activate zsh
_evalcache atuin init zsh

fpath=($fpath "$HOME/.zfunctions")

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ${ZDOTDIR:-~}/.p10k.zsh ]] || source ${ZDOTDIR:-~}/.p10k.zsh


# create some folders if they don't exist
[ -d ~/projects ]  && mkdir ~/projects/ || mkdir ~/projects
[ -d ~/personal ] && mkdir ~/personal/ || mkdir ~/personal
[ -d ~/work ] && mkdir ~/work/ || mkdir ~/work


#Display Pokemon
# pokemon-colorscripts --no-title -r 1,3,6

# pnpm
export PNPM_HOME="/home/rubin/.local/share/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end
